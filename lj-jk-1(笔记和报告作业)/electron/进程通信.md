# 进程通信

## 渲染进程向主进程通信（单向通信）

- 首先，主进程需要监听事件
  ```js
  // 第一个参数: 事件名称
  // 第二个参数: 回调函数
  ipcMain.on('my-event', (ev) => {
    // 当收到渲染进程消息时，会执行此处的代码
    // ev: 事件对象
  })
  ```
- 然后，渲染进程可以发起事件
  ```js
  // 第一个参数: 事件名称
  // 第二个参数: 任意想要传递的数据
  ipcRenderer.send('my-event', params)
  ```

> **注意:** 第一个参数，事件名称，在渲染进程和主进程中要保持一样，否则通信失败

## 进程通信的安全问题

在渲染进程中，无法直接引入 `ipcRenderer`，此处需要使用 `preload.js` 技术才能使用 `ipcRenderer`

## 进程双向通信

单向通信是渲染进程对主进程进行通信，那么双向通信则是主进程在接收到渲染进程消息后，可以给出回复

双向通信，主要依赖 `ipcRenderer.invoke` `ipcMain.handle`

双向通信常用于主进程才有权限执行的事情，例如: 打开对话框、扫描文件、读写文件